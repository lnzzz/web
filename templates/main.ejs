<%
  var title = "En Directo Stream";
%>


	<!DOCTYPE html>
	<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
		<title>
			<%=title%>
		</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
		<style>
			.aclaracion {
				color: #555;
				font-weight: bold;
			}
			.nopadded {
				padding-left: 0px;
				padding-right: 0px;
			}
			html, body {
			      height: 100%;
			    }
			
			    body {
			      background: #111;
			    }
			
			    .wrapper {
			      min-height: 100%;
			      display: flex;
			      flex-direction: column;
			    }
			
			    .content {
			      flex: 1;
			    }
			  .no-select {
			    user-select: none; /* Standard syntax */
			    -moz-user-select: none; /* Firefox */
			    -ms-user-select: none; /* Internet Explorer/Edge */
			    -webkit-user-select: none; /* Safari */
			  }
			
			  
			
			  .feature {
			    background: #000;
			    border-radius: 15px;
			    color: #FFF;
			    text-align: center;
			    padding-top: 15px;
			    height: 100%;
			  }
			
			  .active {
			    background: violet !important;
			    color: black !important;
			  }
			
			  .nav-link {
			    color: violet;
			  }
			
			  .nav-link:hover {
			    color: pink;
			  }
			
			  .feature h2 {
			    color: violet;
			    font-weight: bold;
			  }
			  .feature h4 {
			    text-transform: uppercase;
			    font-size: 16px;
			  }
			
			  .feature h3 {
			    text-transform: uppercase;
			    color: pink;
			    font-size: 18px;
			  }
			
			  .table thead th {
			    background: #000 !important;
			    color: white;
			    text-align: center;
			    text-transform: uppercase;
			    border-bottom: solid 1px #222;
			  }
			  .navbar-custom .navbar-nav .nav-link {
			    border-bottom: none !important;
			  }
			
			  header {
			    border-bottom: solid 4px #0013ff;
				background: rgb(0,0,87);
				background: -moz-linear-gradient(90deg, rgba(0,0,87,1) 0%, rgba(0,0,0,1) 100%);
				background: -webkit-linear-gradient(90deg, rgba(0,0,87,1) 0%, rgba(0,0,0,1) 100%);
				background: linear-gradient(90deg, rgba(0,0,87,1) 0%, rgba(0,0,0,1) 100%);
				filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#000057",endColorstr="#000000",GradientType=1);

			  }
			
			  .table tbody tr td {
			    border-bottom: solid 1px #222;
			    background: #111 !important;
			    color: pink;
			    text-align: center;
			  }
			
			  footer {
			    color: violet;
			  }

			 #icons {
        		display: flex;
        		justify-content: center;
        		align-items: center;
    		}
			.parent {
				display: grid;
				grid-template-columns: repeat(2, 1fr) 4fr;
				grid-template-rows: 1fr;
				grid-column-gap: 40px;
				grid-row-gap: 0px;
			}

			.div1 { grid-area: 1 / 1 / 2 / 2; }
			.div2 { grid-area: 1 / 2 / 2 / 3; }
			.div3 { grid-area: 1 / 3 / 2 / 4; }

			.div3 img, .div2 img {
				margin-left: 10px;
				margin-right: 10px;
			}

			@media screen and (max-width: 780px) {
				.c-icon { display: none; }
			}

			.popover-body {
				background-color: #222 !important;
				border-radius: 0px 0px 5px 5px;
			}

		</style>
	</head>
	<body>
		<div class="wrapper">
			<header class="mb-4">
				<div class="container">
					<div class="justify-content-between parent" id="icons">
						<div class="div1">
							<img src="/images/EDS.svg" width="150" height="150">
							
						</div>
						<div class="div2">
							<a style="text-decoration: none" href="https://twitter.com/EndirectoStream" target="_blank">
								<img src="/images/Twitter.svg" width="50" height="50"/>
							</a>
							<img src="/images/YT.svg" width="50" height="50"/>
							<img src="/images/Twitch.svg" width="50" height="50"/>
						</div>
						<div class="div3">
							<% for (var i=0; i<data.values.channels.length; i++) { %>
								<% 
									const twitchLink = data.getLink(data.values.channels[i], data.channelData, 'twitch', false);
									const youtubeLink = data.getLink(data.values.channels[i], data.channelData, 'youtube', false);
									if (twitchLink && youtubeLink) {
								%>
									<a tabindex="0"
										class="btn nopadded"
										role="button" 
										data-bs-toggle="popover" 
										data-bs-trigger="focus" 
										data-bs-title="Links" 
										data-bs-placement="bottom" 
										data-bs-content="<a href='<%= youtubeLink %>' target='_blank'><img src='/images/YT.svg' /></a><a href='<%= twitchLink %>' target='_blank'><img class='mt-3' src='/images/Twitch.svg' /></a>"
									>
								<% } else if (twitchLink && !youtubeLink) { %>
									<a class="btn nopadded" href="<%= twitchLink %>" target="_blank">
								<% } else if (!twitchLink && youtubeLink) { %>
									<a class="btn nopadded" href="<%= youtubeLink %>" target="_blank">
								<% } %>
									<img class="c-icon" src="/images/<%= data.values.channels[i] %>.svg" width="50" height="50"/>
								</a>
							<% } %>
						</div>
						</div>
				</div>
			</header>
			<div class="container">
        		<ul class="nav nav-pills justify-content-between">
					<div class="d-flex">
					<li class="nav-item"><a href="#" id="totals-btn" class="nav-link active" onClick="display('totals'); return false;">Total</a></li>
					<li class="nav-item"><a href="#" id="youtube-btn" class="nav-link" onClick="display('youtube'); return false;">Youtube</a></li>
					<li class="nav-item"><a href="#" id="twitch-btn" class="nav-link" onClick="display('twitch'); return false;">Twitch</a></li>
					</div>
					<li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
				</ul>
				<div id="stats-totals" class="stats row g-4 py-5 row-cols-1 row-cols-lg-5 gx-2">
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxDia.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. del d&iacute;a <br/><span class="aclaracion">24hs</span></h4>
							<h3><%= data.totals.maxDay[0] %></h3>
							<h2><%= data.totals.maxDay[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube me-2"></i> 
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxManiana.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la ma&ntilde;ana <br/><span class="aclaracion">07:00 a 10:00</span></h4>
							<h3><%= data.totals.maxMorning[0] %></h3>
							<h2><%= data.totals.maxMorning[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube me-2"></i> 
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxMediodia.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. del mediod&iacute;a <br/><span class="aclaracion">10:00 a 14:00</span></h4>
							<h3><%= data.totals.maxMidday[0] %></h3>
							<h2><%= data.totals.maxMidday[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube me-2"></i> 
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxTarde.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la tarde <br/><span class="aclaracion">14:00 a 18:00</span></h4>
							<h3><%= data.totals.maxAfternoon[0] %></h3>
							<h2><%= data.totals.maxAfternoon[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube me-2"></i> 
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxNoche.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la noche <br/><span class="aclaracion">18:00 a 23:00</span></h4>
							<h3><%= data.totals.maxNight[0] %></h3>
							<h2><%= data.totals.maxNight[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube me-2"></i> 
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
				</div>
				<div id="stats-twitch" class="stats row g-4 py-5 row-cols-1 row-cols-lg-5 gx-2">
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxDia.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. del d&iacute;a <br/><span class="aclaracion">24hs</span></h4>
							<h3><%= (data.totals.maxDayTwitch[1] > 0) ? data.totals.maxDayTwitch[0] : 'sin datos'  %></h3>
							<h2><%= data.totals.maxDayTwitch[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxManiana.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la ma&ntilde;ana <br/><span class="aclaracion">07:00 a 10:00</span></h4>
							<h3><%= data.totals.maxMorningTwitch[0] %></h3>
							<h2><%= data.totals.maxMorningTwitch[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxMediodia.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. del mediod&iacute;a <br/><span class="aclaracion">10:00 a 14:00</span></h4>
							<h3><%= data.totals.maxMiddayTwitch[0] %></h3>
							<h2><%= data.totals.maxMiddayTwitch[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxTarde.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la tarde <br/><span class="aclaracion">14:00 a 18:00</span></h4>
							<h3><%= data.totals.maxAfternoonTwitch[0] %></h3>
							<h2><%= data.totals.maxAfternoonTwitch[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxNoche.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la noche <br/><span class="aclaracion">18:00 a 23:00</span></h4>
							<h3><%= data.totals.maxNightTwitch[0] %></h3>
							<h2><%= data.totals.maxNightTwitch[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-twitch"></i>
							</div>
						</div>
					</div>
				</div>
				<div id="stats-youtube" class="stats row g-4 py-5 row-cols-1 row-cols-lg-5">
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxDia.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. del d&iacute;a <br/><span class="aclaracion">24hs</span></h4>
							<h3><%= (data.totals.maxDayYoutube[1] > 0) ? data.totals.maxDayYoutube[0] : 'sin datos'  %></h3>
							<h2><%= data.totals.maxDayYoutube[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxManiana.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la ma&ntilde;ana <br/><span class="aclaracion">07:00 a 10:00</span></h4>
							<h3><%= data.totals.maxMorningYoutube[0] %></h3>
							<h2><%= data.totals.maxMorningYoutube[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxMediodia.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. del mediod&iacute;a <br/><span class="aclaracion">10:00 a 14:00</span></h4>
							<h3><%= data.totals.maxMiddayYoutube[0] %></h3>
							<h2><%= data.totals.maxMiddayYoutube[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxTarde.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la tarde <br/><span class="aclaracion">14:00 a 18:00</span></h4>
							<h3><%= data.totals.maxAfternoonYoutube[0] %></h3>
							<h2><%= data.totals.maxAfternoonYoutube[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube"></i>
							</div>
						</div>
					</div>
					<div class="col">
						<div class="feature">
							<div class="d-inline-flex align-items-center justify-content-center fs-2 mb-3">
								<img src="/images/maxNoche.svg" width="50" height="50"/>
							</div>
							<h4>M&aacute;x. de la noche <br/><span class="aclaracion">18:00 a 23:00</span></h4>
							<h3><%= data.totals.maxNightYoutube[0] %></h3>
							<h2><%= data.totals.maxNightYoutube[1] %></h2>
							<div class="d-flex justify-content-end px-3 pb-3">
								<i class="bi bi-youtube"></i> 
							</div>
						</div>
					</div>
				</div>
				<div id="sum-totals" class="tbl row g-4 py-5 row-cols-1 row-cols-lg-3">
					<table class="table">
						<thead>
							<tr>
								<th scope="col">Hora</th>
								<% for (var i=0; i<data.values.channels.length; i++) { %>
									<th scope="col">
										<div class="my-3 c-icon">
											<img src="/images/<%= data.values.channels[i] %>.svg" width="40" height="40"/>
										</div>
										<%= data.values.channels[i]; %>
									</th>
									<% } %>
							</tr>
						</thead>
						<tbody>
							<% for(var i in data.values.totals) { %>
								<tr>
									<td>
										<%= data.adjustDate(new Date(i)) + ":" + String(new Date(i).getMinutes()).padStart(2, '0'); %>
									</td>
									<% for (var j=0; j<data.values.channels.length; j++) { %>
										<td>
											<%= data.getByIndex(i, data.values.totals, data.values.channels[j]); %>
										</td>
									<% } %>
								</tr>
								<% } %>
						</tbody>
					</table>
				</div>
				<div id="sum-twitch" class="tbl d-none row g-4 py-5 row-cols-1 row-cols-lg-3">
					<table class="table">
						<thead>
							<tr>
								<th scope="col">Hora</th>
								<% for (var i=0; i<data.values.channels.length; i++) { %>
									<th scope="col">
										<div class="my-3">
											<img src="/images/<%= data.values.channels[i] %>.svg" width="40" height="40"/>
										</div>
										<%= data.values.channels[i]; %>
									</th>
									<% } %>
							</tr>
						</thead>
						<tbody>
							<% for(var i in data.values.twitch) { %>
								<tr>
									<td>
										<%= data.adjustDate(new Date(i)) + ":" + String(new Date(i).getMinutes()).padStart(2, '0'); %>
									</td>
									<% for (var j=0; j<data.values.channels.length; j++) { %>
										<td>
											<%= data.getByIndex(i, data.values.twitch, data.values.channels[j]); %>
										</td>
									<% } %>
								</tr>
								<% } %>
						</tbody>
					</table>
				</div>
				<div id="sum-youtube" class="tbl d-none row g-4 py-5 row-cols-1 row-cols-lg-3">
					<table class="table">
						<thead>
							<tr>
								<th scope="col">Hora</th>
								<% for (var i=0; i<data.values.channels.length; i++) { %>
									<th scope="col">
										<div class="my-3">
											<img src="/images/<%= data.values.channels[i] %>.svg" width="40" height="40"/>
										</div>
										<%= data.values.channels[i]; %>
									</th>
									<% } %>
							</tr>
						</thead>
						<tbody>
							<% for(var i in data.values.youtube) { %>
								<tr>
									<td>
										<%= data.adjustDate(new Date(i)) + ":" + String(new Date(i).getMinutes()).padStart(2, '0'); %>
									</td>
									<% for (var j=0; j<data.values.channels.length; j++) { %>
										<td>
											<%= data.getByIndex(i, data.values.youtube, data.values.channels[j]); %>
										</td>
									<% } %>
								</tr>
								<% } %>
						</tbody>
					</table>
				</div>
			</div>
			<footer class="py-3 my-4 mt-auto">
				<p class="text-center">&copy; 2024 En Directo Stream</p>
			</footer>
		</div>
    <script src="/main.js"></script>
	</body>
	</html>